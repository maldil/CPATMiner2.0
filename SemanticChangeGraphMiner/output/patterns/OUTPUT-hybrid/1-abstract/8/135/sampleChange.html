<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3>9efd811508afbbcbb7357735b6b5ed10166cd084,deeplearning4j/deeplearning4j-core/src/test/java/org/deeplearning4j/nn/layers/samediff/TestSameDiffLambda.java,TestSameDiffLambda,testSameDiffLamdaVertexBasic,#,127
</h3><h3>Before Change</h3><pre><code class='java'>
    @Test
    public void testSameDiffLamdaVertexBasic(){
        Nd4j.getRandom().setSeed(12345);
        ComputationGraphConfiguration conf = <a id="change">new NeuralNetConfiguration.Builder()</a>
                .dataType(DataType.DOUBLE)
                .seed(12345)
                .updater(new Adam(0.01))
                .graphBuilder()
                .addInputs("in1", "in2")
                .addLayer("0", new DenseLayer.Builder().nIn(5).nOut(5).activation(Activation.TANH).build(), "in1")
                .addLayer("1", new DenseLayer.Builder().nIn(5).nOut(5).activation(Activation.TANH).<a id="change">build()</a>, "in2")
                .addVertex("lambda", new SameDiffSimpleLambdaVertex(), "0", "1")
                .addLayer("2", new OutputLayer.Builder().nIn(5).nOut(5).activation(Activation.SOFTMAX)
                        .lossFunction(LossFunctions.LossFunction.MCXENT).build(), "lambda")</code></pre><h3>After Change</h3><pre><code class='java'>

    @Test
    public void testSameDiffLamdaVertexBasic(){
        <a id="change">for(</a>WorkspaceMode wsm : new WorkspaceMode[]{WorkspaceMode.ENABLED, WorkspaceMode.NONE}<a id="change">) </a>{
            log.info("--- Workspace Mode: {} ---", wsm);

            Nd4j.getRandom().setSeed(12345);
            ComputationGraphConfiguration conf = <a id="change">new NeuralNetConfiguration.Builder()</a>
                    .<a id="change">trainingWorkspaceMode(wsm</a><a id="change">)</a>
                    .inferenceWorkspaceMode(wsm)
                    .dataType(DataType.DOUBLE)
                    .seed(12345)
                    .updater(new Adam(0.01))
                    .graphBuilder()
                    .addInputs("in1", "in2")
                    .addLayer("0", new DenseLayer.Builder().nIn(5).nOut(5).activation(Activation.TANH).<a id="change">build()</a>, "in1")
                    .addLayer("1", new DenseLayer.Builder().nIn(5).nOut(5).activation(Activation.TANH).build(), "in2")
                    .addVertex("lambda", new SameDiffSimpleLambdaVertex(), "0", "1")
                    .addLayer("2", new OutputLayer.Builder().nIn(5).nOut(5).activation(Activation.SOFTMAX)
                            .lossFunction(LossFunctions.LossFunction.MCXENT).build(), "lambda")
                    .setOutputs("2")
                    .build();

            //Equavalent, not using SameDiff Lambda:
            ComputationGraphConfiguration confStd = new NeuralNetConfiguration.Builder()
                    .trainingWorkspaceMode(wsm)
                    .<a id="change">inferenceWorkspaceMode(wsm</a><a id="change">)</a>
                    .dataType(DataType.DOUBLE)
                    .seed(12345)
                    .updater(new Adam(0.01))
                    .graphBuilder()</code></pre>