<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3>c8882cbfa528eb0da1324b3e54ca67832b688a46,deeplearning4j/deeplearning4j-scaleout/spark/dl4j-spark/src/test/java/org/deeplearning4j/spark/impl/paramavg/TestCompareParameterAveragingSparkVsSingleMachine.java,TestCompareParameterAveragingSparkVsSingleMachine,testAverageEveryStepGraphCNN,#,509
</h3><h3>Before Change</h3><pre><code class='java'>
                    sparkNet.fit(rdd);
                }

                <a id="change">System.out</a>.<a id="change">println(</a>sparkNet.getSparkTrainingStats().<a id="change">statsAsString())</a>;

                INDArray finalSparkParams = sparkNet.getNetwork().params().dup();

                <a id="change">System.out</a>.<a id="change">println("Initial (Local) params:  "</a><a id="change"> + Arrays</a>.<a id="change">toString(initialParams</a>.<a id="change">data()</a>.<a id="change">asFloat()</a><a id="change">)</a><a id="change">)</a>;
                <a id="change">System.out</a>.<a id="change">println("Initial (Spark) params:  "</a><a id="change"> + Arrays</a>.<a id="change">toString(initialSparkParams</a>.<a id="change">data()</a>.<a id="change">asFloat()</a><a id="change">)</a><a id="change">)</a>;
                <a id="change">System.out</a>.<a id="change">println("Final (Local) params:    "</a><a id="change"> + Arrays</a>.<a id="change">toString(finalParams</a>.<a id="change">data()</a>.<a id="change">asFloat()</a><a id="change">)</a><a id="change">)</a>;
                <a id="change">System.out</a>.<a id="change">println("Final (Spark) params:    "</a><a id="change"> + Arrays</a>.<a id="change">toString(finalSparkParams</a>.<a id="change">data()</a>.asFloat()<a id="change">)</a><a id="change">)</a>;
                assertArrayEquals(initialParams.data().asFloat(), initialSparkParams.data().asFloat(), 1e-8f);
                assertArrayEquals(finalParams.data().asFloat(), finalSparkParams.data().asFloat(), 1e-6f);
</code></pre><h3>After Change</h3><pre><code class='java'>
                }

//                System.out.println(sparkNet.getSparkTrainingStats().statsAsString());
                sparkNet.getSparkTrainingStats().<a id="change">statsAsString()</a>;

                INDArray finalSparkParams = sparkNet.getNetwork().params().dup();
</code></pre>