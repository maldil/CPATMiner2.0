<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3>2f3d7330ceee5b562bcef024ed4b1b2aa785120e,deeplearning4j/deeplearning4j-scaleout/spark/dl4j-spark/src/main/java/org/deeplearning4j/spark/iterator/SparkAMDSI.java,SparkAMDSI,SparkAMDSI,#MultiDataSetIterator#number#BlockingQueue#boolean#DataSetCallback#number#,83
</h3><h3>Before Change</h3><pre><code class='java'>
        /**
         * We want to ensure, that background thread will have the same thread-&gt;device affinity, as master thread
         */
        Nd4j.<a id="change">getAffinityManager()</a>.<a id="change">attachThreadToDevice(</a>thread, <a id="change">deviceId</a><a id="change">)</a>;

        thread.setDaemon(true);
        thread.start();</code></pre><h3>After Change</h3><pre><code class='java'>
        if (iterator.resetSupported())
            this.backedIterator.reset();

        this.thread = new SparkPrefetchThread(buffer, iterator, terminator, Nd4j.<a id="change">getAffinityManager()</a>.getDeviceForCurrentThread());

        context = TaskContext.get();
</code></pre>