<link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3>1adc25919c2620575e1e15c4a9337ae43a02ff20,datavec/datavec-python/src/main/java/org/datavec/python/PythonExecutioner.java,PythonExecutioner,acquireGIL,#,220
</h3><h3>Before Change</h3><pre><code class='java'>

    private static void acquireGIL(){
        log.info("---_enterSubInterpreter()---");
        <a id="change">if (</a>PyGILState_Check()<a id="change"> != 1)</a>{
            gilStates.put(Thread.currentThread().getId(), PyGILState_Ensure());
            log.<a id="change">info("GIL ensured"</a><a id="change">)</a>;
        }
    }
</code></pre><h3>After Change</h3><pre><code class='java'>
        log.info("acquireGIL()");
        log.info("CPython: PyEval_SaveThread()");
        mainThreadState = PyEval_SaveThread();
        log.<a id="change">info("CPython: PyThreadState_New()"</a><a id="change">)</a>;
        currentThreadState = PyThreadState_New(interpreters.get(currentInterpreter).interp());
        log.info("CPython: PyEval_RestoreThread()");
        PyEval_RestoreThread(currentThreadState);</code></pre>